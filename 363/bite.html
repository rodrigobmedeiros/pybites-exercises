<p>Refactor the code from <code>invoice_to_be_refactored</code> inside <code>invoice_refactored</code> and make it more readable. Currently the function exhibits the infamous <a href="http://wiki.c2.com/?ArrowAntiPattern" target="_blank" rel="noopener">Arrow anti pattern</a>.</p>
<p>Remember from the Zen of Python: <em>flat is better than nested</em>, so try to <strong>flatten</strong> it with the following techniques:</p>
<p>1. <a href="https://refactoring.guru/replace-nested-conditional-with-guard-clauses" target="_blank" rel="noopener">Adding "guard clauses"</a></p>
<p>2. <a href="https://www.jetbrains.com/help/pycharm/extract-method.html">Using the "extract method"</a></p>
<p>To summarize the code:</p>
<p>- If 0 tickets raise a <code>ValueError</code><br />- If the movie passed into the function does not match any movies in <code>available_movies</code> raise a LookupError<br />- For the matching movie get the <code>discount</code> and <code>price</code>:<br />&nbsp; - <code>discount</code> = <code>10</code> if you buy <code>5</code> or more tickets<br />&nbsp; - price = <code>12</code> if the quality is <code>IMAX</code> else <code>10</code><br />- Calculate and return the <code>price</code> = <code>tickets * price - discount</code></p>
<p><em><strong>Note</strong>: there is no single correct solution for this exercise. The goal is to get more familiar with refactoring techniques.&nbsp;</em></p>
<div style="caret-color: #222222; color: #222222; font-family: Arial, Helvetica, sans-serif; text-size-adjust: auto; background-color: #ffffff;"><em>This exercise was inspired by <a href="https://www.amazon.com/Refactoring-Improving-Existing-Addison-Wesley-Signature/dp/0134757599" target="_blank" rel="noopener">Martin Fowler's Refactoring book</a>.</em></div>